import{f as m,g as C,j as d,e as E,L as N}from"./index-D5LvnpmU.js";import{M as H}from"./MarkdownEditor-B8EpRIqD.js";/* empty css                        */import{T as Y}from"./Top-D6xVj0fT.js";import{u as _}from"./useUsername-DVOvv1F_.js";import{c as P}from"./clsx-B4VjtFc_.js";import{u as X}from"./useAccount-BuaSSsxz.js";import"./utils-D2Qow9-g.js";import"./isAddressEqual-DMkfnKZp.js";import"./secp256k1-Cw7wJsPR.js";const M=({index:s,header:e,contentHeader:t,onDelete:o,reloadCallback:n})=>{const r=m.useRef(null),[h,g]=C.useState(localStorage.getItem(`chapter.${s}.title`));return n==null||n(s,()=>{var a;g(localStorage.getItem(`chapter.${s}.title`)),(a=r.current)==null||a.setMarkdown(localStorage.getItem(`chapter.${s}.content`)??"")}),d.jsxs("fieldset",{className:"relative border border-secondary p-4 w-full",children:[d.jsx("legend",{className:"text-left",children:e??`Chapter ${s}`}),!!o&&d.jsx("button",{className:"absolute top-8 right-8",onClick:()=>o(s),children:"🗑️"}),d.jsxs("div",{id:`chapter-${s}-title`,className:"mb-4 bg-secondary/25 scroll-m-24",children:[d.jsx("h2",{children:"Title"}),d.jsx("input",{onChange:a=>{const{value:i}=a.target;localStorage.setItem(`chapter.${s}.title`,i),g(i)},value:h??"",id:"title",placeholder:"Title",className:"input input-bordered w-full max-w-xs my-2"})]}),d.jsx("div",{id:`chapter-${s}-content`,className:"mt-4 mb-4 bg-secondary/25 scroll-m-24",children:d.jsx("h2",{className:"mt-2",children:t??`Chapter ${s} Content`})}),d.jsx("div",{className:"flex justify-center",children:d.jsx(H,{editorRef:r,markdown:localStorage.getItem(`chapter.${s}.content`)??"",className:"dark-theme dark-editor content mt-4",onChange:()=>{var a;localStorage.setItem(`chapter.${s}.content`,((a=r.current)==null?void 0:a.getMarkdown())??"")}})})]})},k={x:0,y:0,width:0,height:0,unit:"px"},j=(s,e,t)=>Math.min(Math.max(s,e),t),A=(...s)=>s.filter(e=>e&&typeof e=="string").join(" "),$=(s,e)=>s===e||s.width===e.width&&s.height===e.height&&s.x===e.x&&s.y===e.y&&s.unit===e.unit;function K(s,e,t,o){const n=f(s,t,o);return s.width&&(n.height=n.width/e),s.height&&(n.width=n.height*e),n.y+n.height>o&&(n.height=o-n.y,n.width=n.height*e),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e),s.unit==="%"?D(n,t,o):n}function L(s,e,t){const o=f(s,e,t);return o.x=(e-o.width)/2,o.y=(t-o.height)/2,s.unit==="%"?D(o,e,t):o}function D(s,e,t){return s.unit==="%"?{...k,...s,unit:"%"}:{unit:"%",x:s.x?s.x/e*100:0,y:s.y?s.y/t*100:0,width:s.width?s.width/e*100:0,height:s.height?s.height/t*100:0}}function f(s,e,t){return s.unit?s.unit==="px"?{...k,...s,unit:"px"}:{unit:"px",x:s.x?s.x*e/100:0,y:s.y?s.y*t/100:0,width:s.width?s.width*e/100:0,height:s.height?s.height*t/100:0}:{...k,...s,unit:"px"}}function I(s,e,t,o,n,r=0,h=0,g=o,a=n){const i={...s};let w=Math.min(r,o),c=Math.min(h,n),p=Math.min(g,o),l=Math.min(a,n);e&&(e>1?(w=h?h*e:w,c=w/e,p=g*e):(c=r?r/e:c,w=c*e,l=a/e)),i.y<0&&(i.height=Math.max(i.height+i.y,c),i.y=0),i.x<0&&(i.width=Math.max(i.width+i.x,w),i.x=0);const u=o-(i.x+i.width);u<0&&(i.x=Math.min(i.x,o-w),i.width+=u);const x=n-(i.y+i.height);if(x<0&&(i.y=Math.min(i.y,n-c),i.height+=x),i.width<w&&((t==="sw"||t=="nw")&&(i.x-=w-i.width),i.width=w),i.height<c&&((t==="nw"||t=="ne")&&(i.y-=c-i.height),i.height=c),i.width>p&&((t==="sw"||t=="nw")&&(i.x-=p-i.width),i.width=p),i.height>l&&((t==="nw"||t=="ne")&&(i.y-=l-i.height),i.height=l),e){const R=i.width/i.height;if(R<e){const v=Math.max(i.width/e,c);(t==="nw"||t=="ne")&&(i.y-=v-i.height),i.height=v}else if(R>e){const v=Math.max(i.height*e,w);(t==="sw"||t=="nw")&&(i.x-=v-i.width),i.width=v}}return i}function B(s,e,t,o){const n={...s};return e==="ArrowLeft"?o==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):o==="w"?(n.x-=t,n.width+=t):o==="sw"?(n.x-=t,n.width+=t,n.height+=t):o==="ne"?(n.y+=t,n.width-=t,n.height-=t):o==="e"?n.width-=t:o==="se"&&(n.width-=t,n.height-=t):e==="ArrowRight"&&(o==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):o==="w"?(n.x+=t,n.width-=t):o==="sw"?(n.x+=t,n.width-=t,n.height-=t):o==="ne"?(n.y-=t,n.width+=t,n.height+=t):o==="e"?n.width+=t:o==="se"&&(n.width+=t,n.height+=t)),e==="ArrowUp"?o==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):o==="n"?(n.y-=t,n.height+=t):o==="ne"?(n.y-=t,n.width+=t,n.height+=t):o==="sw"?(n.x+=t,n.width-=t,n.height-=t):o==="s"?n.height-=t:o==="se"&&(n.width-=t,n.height-=t):e==="ArrowDown"&&(o==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):o==="n"?(n.y+=t,n.height-=t):o==="ne"?(n.y+=t,n.width-=t,n.height-=t):o==="sw"?(n.x-=t,n.width+=t,n.height+=t):o==="s"?n.height+=t:o==="se"&&(n.width+=t,n.height+=t)),n}const S={capture:!0,passive:!1};let U=0;const b=class y extends C.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=C.createRef(),this.mediaRef=C.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${U++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:o}=this.props,n=this.getBox();if(!t)return;const r=f(t,n.width,n.height);if(o)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=e.target.dataset.ord,g=!!h;let a=e.clientX,i=e.clientY,w=r.x,c=r.y;if(h){const p=e.clientX-n.x,l=e.clientY-n.y;let u=0,x=0;h==="ne"||h=="e"?(u=p-(r.x+r.width),x=l-r.y,w=r.x,c=r.y+r.height):h==="se"||h==="s"?(u=p-(r.x+r.width),x=l-(r.y+r.height),w=r.x,c=r.y):h==="sw"||h=="w"?(u=p-r.x,x=l-(r.y+r.height),w=r.x+r.width,c=r.y):(h==="nw"||h=="n")&&(u=p-r.x,x=l-r.y,w=r.x+r.width,c=r.y+r.height),a=w+n.x+u,i=c+n.y+x}this.evData={startClientX:a,startClientY:i,startCropX:w,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:g,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:o,locked:n,keepSelection:r,onChange:h}=this.props,g=this.getBox();if(o||n||r&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=e.clientX-g.x,i=e.clientY-g.y,w={unit:"px",x:a,y:i,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:a,startCropY:i,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(f(w,g.width,g.height),D(w,g.width,g.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:o,onChange:n,onDragStart:r}=this.props,h=this.getBox();if(o||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,r&&r(e));const{evData:g}=this;g.clientX=e.clientX,g.clientY=e.clientY;let a;g.isResize?a=this.resizeCrop():a=this.dragCrop(),$(t,a)||n(f(a,h.width,h.height),D(a,h.width,h.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:o,onChange:n,onComplete:r}=this.props;if(o)return;const h=e.key;let g=!1;if(!t)return;const a=this.getBox(),i=this.makePixelCrop(a),w=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?y.nudgeStepLarge:e.shiftKey?y.nudgeStepMedium:y.nudgeStep;if(h==="ArrowLeft"?(i.x-=w,g=!0):h==="ArrowRight"?(i.x+=w,g=!0):h==="ArrowUp"?(i.y-=w,g=!0):h==="ArrowDown"&&(i.y+=w,g=!0),g){e.cancelable&&e.preventDefault(),i.x=j(i.x,0,a.width-i.width),i.y=j(i.y,0,a.height-i.height);const c=f(i,a.width,a.height),p=D(i,a.width,a.height);n(c,p),r&&r(c,p)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:o=0,crop:n,disabled:r,minWidth:h=0,minHeight:g=0,maxWidth:a,maxHeight:i,onChange:w,onComplete:c}=this.props,p=this.getBox();if(r||!n)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const l=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?y.nudgeStepLarge:e.shiftKey?y.nudgeStepMedium:y.nudgeStep,u=f(n,p.width,p.height),x=B(u,e.key,l,t),R=I(x,o,t,p.width,p.height,h,g,a,i);if(!$(n,R)){const v=D(R,p.width,p.height);w(R,v),c&&c(R,v)}},this.onDocPointerDone=e=>{const{crop:t,disabled:o,onComplete:n,onDragEnd:r}=this.props,h=this.getBox();this.unbindDocMove(),!(o||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,r&&r(e),n&&n(f(t,h.width,h.height),D(t,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:o,width:n,height:r}=e.getBoundingClientRect();return{x:t,y:o,width:n,height:r}}componentDidUpdate(e){const{crop:t,onComplete:o}=this.props;if(o&&!e.crop&&t){const{width:n,height:r}=this.getBox();n&&r&&o(f(t,n,r),D(t,n,r))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,S),this.document.addEventListener("pointerup",this.onDocPointerDone,S),this.document.addEventListener("pointercancel",this.onDocPointerDone,S),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,S),this.document.removeEventListener("pointerup",this.onDocPointerDone,S),this.document.removeEventListener("pointercancel",this.onDocPointerDone,S),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),o=this.makePixelCrop(t),n=e.clientX-e.startClientX,r=e.clientY-e.startClientY;return o.x=j(e.startCropX+n,0,t.width-o.width),o.y=j(e.startCropY+r,0,t.height-o.height),o}getPointRegion(e,t,o,n){const{evData:r}=this,h=r.clientX-e.x,g=r.clientY-e.y;let a;n&&t?a=t==="nw"||t==="n"||t==="ne":a=g<r.startCropY;let i;return o&&t?i=t==="nw"||t==="w"||t==="sw":i=h<r.startCropX,i?a?"nw":"sw":a?"ne":"se"}resolveMinDimensions(e,t,o=0,n=0){const r=Math.min(o,e.width),h=Math.min(n,e.height);return!t||!r&&!h?[r,h]:t>1?r?[r,r/t]:[h*t,h]:h?[h*t,h]:[r,r/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:o,maxHeight:n}=this.props,r=this.getBox(),[h,g]=this.resolveMinDimensions(r,t,this.props.minWidth,this.props.minHeight);let a=this.makePixelCrop(r);const i=this.getPointRegion(r,e.ord,h,g),w=e.ord||i;let c=e.clientX-e.startClientX,p=e.clientY-e.startClientY;(h&&w==="nw"||w==="w"||w==="sw")&&(c=Math.min(c,-h)),(g&&w==="nw"||w==="n"||w==="ne")&&(p=Math.min(p,-g));const l={unit:"px",x:0,y:0,width:0,height:0};i==="ne"?(l.x=e.startCropX,l.width=c,t?(l.height=l.width/t,l.y=e.startCropY-l.height):(l.height=Math.abs(p),l.y=e.startCropY-l.height)):i==="se"?(l.x=e.startCropX,l.y=e.startCropY,l.width=c,t?l.height=l.width/t:l.height=p):i==="sw"?(l.x=e.startCropX+c,l.y=e.startCropY,l.width=Math.abs(c),t?l.height=l.width/t:l.height=p):i==="nw"&&(l.x=e.startCropX+c,l.width=Math.abs(c),t?(l.height=l.width/t,l.y=e.startCropY-l.height):(l.height=Math.abs(p),l.y=e.startCropY+p));const u=I(l,t,i,r.width,r.height,h,g,o,n);return t||y.xyOrds.indexOf(w)>-1?a=u:y.xOrds.indexOf(w)>-1?(a.x=u.x,a.width=u.width):y.yOrds.indexOf(w)>-1&&(a.y=u.y,a.height=u.height),a.x=j(a.x,0,r.width-a.width),a.y=j(a.y,0,r.height-a.height),a}renderCropSelection(){const{ariaLabels:e=y.defaultProps.ariaLabels,disabled:t,locked:o,renderSelectionAddon:n,ruleOfThirds:r,crop:h}=this.props,g=this.getCropStyle();if(h)return m.createElement("div",{style:g,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!o&&m.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},m.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"nw"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"n"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"ne"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"e"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"se"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"s"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"sw"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"w"),role:"button"})),n&&m.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:a=>a.stopPropagation()},n(this.state)),r&&m.createElement(m.Fragment,null,m.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),m.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={...k,...this.props.crop||{}};return f(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:o,className:n,crop:r,disabled:h,locked:g,style:a,ruleOfThirds:i}=this.props,{cropIsActive:w,newCropIsBeingDrawn:c}=this.state,p=r?this.renderCropSelection():null,l=A("ReactCrop",n,w&&"ReactCrop--active",h&&"ReactCrop--disabled",g&&"ReactCrop--locked",c&&"ReactCrop--new-crop",r&&e&&"ReactCrop--fixed-aspect",r&&o&&"ReactCrop--circular-crop",r&&i&&"ReactCrop--rule-of-thirds",!this.dragStarted&&r&&!r.width&&!r.height&&"ReactCrop--invisible-crop",o&&"ReactCrop--no-animate");return m.createElement("div",{ref:this.componentRef,className:l,style:a},m.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),r?m.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},m.createElement("defs",null,m.createElement("mask",{id:`hole-${this.instanceId}`},m.createElement("rect",{width:"100%",height:"100%",fill:"white"}),o?m.createElement("ellipse",{cx:`${r.x+r.width/2}${r.unit}`,cy:`${r.y+r.height/2}${r.unit}`,rx:`${r.width/2}${r.unit}`,ry:`${r.height/2}${r.unit}`,fill:"black"}):m.createElement("rect",{x:`${r.x}${r.unit}`,y:`${r.y}${r.unit}`,width:`${r.width}${r.unit}`,height:`${r.height}${r.unit}`,fill:"black"}))),m.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,p)}};b.xOrds=["e","w"],b.yOrds=["n","s"],b.xyOrds=["nw","ne","se","sw"],b.nudgeStep=1,b.nudgeStepMedium=10,b.nudgeStepLarge=100,b.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let O=b;function z(s,e,t){return L(K({unit:"%",width:100},t,s,e),s,e)}function F(){const[s,e]=C.useState(""),t=C.useRef(null),[o,n]=C.useState(localStorage.getItem("cover")),[r,h]=C.useState(),g={width:320,height:480};function a(c){if(c.target.files&&c.target.files.length>0){n(null),h(void 0);const p=new FileReader;p.addEventListener("load",()=>{var l;return e(((l=p.result)==null?void 0:l.toString())||"")}),p.readAsDataURL(c.target.files[0])}}function i(c){if(g){const{width:p,height:l}=c.currentTarget;h(z(p,l,g.width/g.height))}}async function w(){const c=t.current;if(!c||!r)throw new Error("Crop canvas does not exist.");const p=document.createElement("canvas");p.width=g.width,p.height=g.height;const l=p.getContext("2d");if(!l)throw new Error("No 2d context");r.unit==="px"&&(r.x=r.x/c.width*100,r.y=r.y/c.height*100,r.width=r.width/c.width*100,r.height=r.height/c.height*100),l.imageSmoothingQuality="high";const u={x:c.naturalWidth*(r.x/100),y:c.naturalHeight*(r.y/100)};l.drawImage(c,u.x,u.y,c.naturalWidth*(r.width/100),c.naturalHeight*(r.height/100),0,0,p.width,p.height);const x=p.toDataURL("image/jpeg");localStorage.setItem("cover",x),n(x)}return d.jsxs("div",{className:"",children:[d.jsx("div",{className:"Crop-Controls",children:d.jsxs("label",{className:"flex justify-center mt-4 tooltip","data-tip":o?"Click to change image.":null,children:[o&&d.jsx("img",{src:o,alt:"Crop Preview",className:"max-h-[50vh]"}),d.jsx("input",{type:"file",accept:"image/*",onChange:a,className:P(!!o&&"hidden","file-input file-input-bordered w-full max-w-xs")})]})}),!!s&&!o&&d.jsx(O,{crop:r,onChange:c=>h(c),aspect:g.width/g.height,minHeight:100,className:"max-h-[50vh]",children:d.jsx("img",{ref:t,alt:"Crop me",src:s,onLoad:i})}),!!r&&!o&&d.jsx(d.Fragment,{children:d.jsx("div",{children:d.jsx("button",{className:"btn btn-secondary rounded-md btn-sm my-4",onClick:w,children:"Crop"})})})]})}const T=()=>d.jsx(F,{}),re=E("/upload/")({component:()=>{const{address:s}=X(),{ens:e,error:t}=_(s),[o,n]=C.useState((()=>{let a=0;for(;localStorage.getItem(`chapter.${a}.title`)!=null;)a++;return Math.max(2,a)})()),r=C.useRef([]);if(t)return d.jsx("h1",{children:t});const h=a=>{console.group("looping");for(let i=a;i<o-1;i++)console.log({idx:i,chapterCount:o}),localStorage.setItem(`chapter.${i}.title`,localStorage.getItem(`chapter.${i+1}.title`)??""),localStorage.setItem(`chapter.${i}.content`,localStorage.getItem(`chapter.${i+1}.content`)??""),r.current[i].call(r.current[i]);console.groupEnd(),o>2?(localStorage.removeItem(`chapter.${o-1}.title`),localStorage.removeItem(`chapter.${o-1}.content`),n(o-1)):(localStorage.setItem(`chapter.${o-1}.title`,""),localStorage.setItem(`chapter.${o-1}.content`,"")),r.current[o-1].call(r.current[o-1])},g=(a,i)=>{r.current[a]=i};return d.jsxs("div",{children:[d.jsx("h1",{id:"top",className:"text-2xl font-semibold text-secondary mt-12 mb-8 scroll-m-24",children:"Upload Hub"}),d.jsxs("div",{className:"drawer lg:drawer-open",children:[d.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),d.jsxs("div",{className:"drawer-content flex flex-col items-center justify-start md:px-8",children:[d.jsxs("div",{id:"book-cover",className:"mt-4 mb-4 w-full bg-secondary/25 scroll-m-24",children:[d.jsx("h1",{className:"mt-2",children:"Select Cover"}),d.jsx(T,{})]}),d.jsx(M,{index:0,header:"Book",contentHeader:"Introduction"}),Array.from({length:o-1},(a,i)=>C.createElement(M,{reloadCallback:g,onDelete:h,key:i,index:i+1})),d.jsx("button",{onClick:()=>n(o+1),className:"btn btn-md rounded-md btn-secondary",children:"Add Chapter"}),d.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-xs btn-secondary border border-primary drawer-button lg:hidden fixed left-0 mt-40 z-10",children:"⇒"})]}),d.jsxs("div",{className:"drawer-side",children:[d.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),d.jsxs("ul",{className:"menu bg-base-200 text-base-content w-80 p-4 mt-28 z-20",children:[d.jsx("h1",{className:"mt-4 mb-4 text-lg font-secondary",children:e}),d.jsx("li",{children:d.jsx(N,{to:"#book-cover",children:"Upload Cover"})}),d.jsx("li",{children:d.jsx(N,{to:"#book-title",children:"Book Title"})}),d.jsx("li",{children:d.jsx(N,{to:"#introduction",children:"Book Introduction"})}),d.jsx("li",{children:d.jsx(N,{to:"#chapters",children:"Chapters"})}),d.jsx("li",{children:d.jsx("a",{children:"Owner Permissions"})})]})]})]}),d.jsx(Y,{})]})}});export{re as Route};
