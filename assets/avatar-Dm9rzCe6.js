import{o as y,r as o,j as l,P as u,M as C,x as v,g as f}from"./index-Ok4mnEmM.js";var g="Avatar",[R,P]=y(g),[I,A]=R(g),p=o.forwardRef((a,e)=>{const{__scopeAvatar:t,...r}=a,[n,s]=o.useState("idle");return l.jsx(I,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:s,children:l.jsx(u.span,{...r,ref:e})})});p.displayName=g;var h="AvatarImage",x=o.forwardRef((a,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:n=()=>{},...s}=a,d=A(h,t),i=b(r,s.referrerPolicy),c=C(m=>{n(m),d.onImageLoadingStatusChange(m)});return v(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?l.jsx(u.img,{...s,ref:e,src:r}):null});x.displayName=h;var w="AvatarFallback",S=o.forwardRef((a,e)=>{const{__scopeAvatar:t,delayMs:r,...n}=a,s=A(w,t),[d,i]=o.useState(r===void 0);return o.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(c)}},[r]),d&&s.imageLoadingStatus!=="loaded"?l.jsx(u.span,{...n,ref:e}):null});S.displayName=w;function b(a,e){const[t,r]=o.useState("idle");return v(()=>{if(!a){r("error");return}let n=!0;const s=new window.Image,d=i=>()=>{n&&r(i)};return r("loading"),s.onload=d("loaded"),s.onerror=d("error"),s.src=a,e&&(s.referrerPolicy=e),()=>{n=!1}},[a,e]),t}var N=p,L=x,j=S;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,e){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,e),e)}};const _=o.forwardRef(({className:a,...e},t)=>l.jsx(N,{ref:t,className:f("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));_.displayName=N.displayName;const E=o.forwardRef(({className:a,...e},t)=>l.jsx(L,{ref:t,className:f("aspect-square h-full w-full",a),...e}));E.displayName=L.displayName;const M=o.forwardRef(({className:a,...e},t)=>l.jsx(j,{ref:t,className:f("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));M.displayName=j.displayName;export{_ as A,E as a,M as b};
